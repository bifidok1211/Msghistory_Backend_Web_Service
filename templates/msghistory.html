<!DOCTYPE html>
<html lang="ru">
<head>
  <title>Составление заявки</title>
  <link rel="stylesheet" href="/resources/styles/main.css">
  <link rel="stylesheet" href="/resources/styles/msghistory.css">
  <link rel="stylesheet" href="/resources/styles/cards.css">
</head>
<body>

  <header class="tg-header tg-header--with-link">
    <div class="logo">
      <span class="logo-title">Telegram</span>
      <span class="logo-subtitle">Новая эра в общении</span>
    </div>
    <a class="header-link" href="/Msghistory">Каналы</a>
  </header>

  <div class="page-title">Анализ поста</div>

  <div class="order-top">
    <!-- 3/4: Введите описание поста -->
    <div class="post-desc panel">
      <p class="post-desc__title">Введите описание поста:</p>
      <textarea class="post-desc__area" name="post_description" placeholder="Введите описание"></textarea>
    </div>
  
    <!-- 1/4: Результат -->
    <div class="order-summary panel">
      <p class="order-summary__title">Результат</p>
      <div class="order-summary__row">
        <span>Охват:</span>
        <span class="order-summary__value">74%</span>
      </div>
      <div class="order-summary__row">
        <span>Коэффициент передачи:</span>
        <span class="order-summary__value">1.23</span>
      </div>
    </div>
  </div>

  <!-- СПИСОК «строк-панелей» анализа -->
  <div class="analysis-list">
    {{range .ChannelsLink}}
    <div class="analysis-row">
      <!-- Колонка 1 — канал -->
      <div class="analysis-col analysis-col--channel">
        {{with .Channel.Image}}<img class="channel-img" src="{{.}}" alt="">{{end}}
        <p class="channel-title">{{.Channel.Title}}</p>
        <a class="tg-btn" href="/channel/{{ .ID }}">Перейти</a>
      </div>

      <!-- Колонка 2 — подписчики (число) -->
      <div class="analysis-col">
        <div class="metrics-label">Количество подписчиков:</div>
        <div class="metrics-value">
          {{ with .Channel.Subscribers }}{{ . }}{{ else }}-{{ end }}
        </div>
      </div>

      <!-- Колонка 3 — просмотры (инпут) -->
      <div class="analysis-col">
        <div class="metrics-label">Количество просмотров:</div>
        <input class="metrics-input" type="number" name="views"
               value="{{with .Views}}{{.}}{{end}}" placeholder="Введите число">
      </div>

      <!-- Колонка 4 — второй параметр (инпут) -->
      <div class="analysis-col">
        <div class="metrics-label">Уровень репоста:</div>
        <input class="metrics-input" type="number" name="repost_level"
               value="{{with .RepostLevel}}{{.}}{{end}}" placeholder="Введите число">
      </div>
    </div>
    {{end}}
  </div>

  <div class="tg-delete-button">
    <form action="/msghistory/{{ .ID }}/delete" method="POST">
      <button class="card-button" type="submit">Удалить пост</button>
    </form>
  </div>

</body>
</html>
